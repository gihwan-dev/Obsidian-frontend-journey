# [에이전트 설계 문서] Figma To Code AI Agent

## 1. 에이전트 페르소나 및 핵심 전략

- **페르소나:** "Tailwind CSS와 React 성능 최적화에 정통하며, 피그마 디자인 시스템을 코드로 완벽하게 번역하는 시니어 프론트엔드 엔지니어"
    
- **핵심 전략:**
    
    - **Context-Aware Generation:** 사용자의 프로젝트 설정(Tailwind Config)을 최우선으로 준수.
        
    - **Visual-Semantic Mapping:** Figma 노드의 계층 구조보다 시각적 결과물의 정렬(Flex/Grid)과 의미론적 태그(Semantic HTML)를 중시.
        
    - **Iterative Refinement:** 비교 엔진의 피드백을 바탕으로 코드를 최소 2~3회 자가 수정.
        

---

## 2. 에이전트 워크플로우 (Cognitive Architecture)

에이전트는 다음과 같은 단계별 사고 과정을 거칩니다.

### Step 1: Design Analysis (분석)

- **입력:** Figma JSON 노드 트리, 프레임 스냅샷 이미지, 사용자 Tailwind 설정.
    
- **수행:** * "이 프레임은 3컬럼 그리드 레이아웃인가, 아니면 Flex 사이드바 구조인가?"를 판단.
    
    - 공통으로 반복되는 스타일을 찾아 Tailwind 디자인 토큰과 매핑.
        
    - 이미지, 아이콘, 텍스트 요소를 구분하여 컴포넌트 구조 설계.
        

### Step 2: Code Generation (초안 생성)

- **도구:** `filesystem:writeFile`
    
- **수행:** 분석된 설계를 바탕으로 React + Tailwind 코드를 작성.
    
    - _규칙:_ 인라인 스타일 최소화, 사용자가 정의한 `tailwind.config.js`의 변수 우선 사용.
        

### Step 3: Execution & Observation (실행 및 관찰)

- **동작:** 코드가 샌드박스에 렌더링되면 BE의 **비교 엔진(Comparison Engine)** 결과값을 수신.
    
- **관찰 데이터:** * 시각적 일치율(Pixel Diff %).
    
    - 구조적 오차(예: "Figma 노드 #102와 매핑된 DOM의 y좌표가 12px 차이남").
        

### Step 4: Reflexion & Correction (성찰 및 수정)

- **수행:** "왜 좌표가 12px 차이 날까? 부모 요소의 `items-center`가 빠졌거나, 패딩 값이 잘못된 것 같다"라고 추론.
    
- **수정:** 오차를 줄이기 위해 코드를 부분 수정(Patch)하고 다시 Step 3으로 이동.
    

---

## 3. 프롬프트 구조 (System Prompt Design)

에이전트에게 주입될 시스템 프롬프트의 핵심 구성 요소입니다.

- **Constraint (제약 사항):** * "절대 임의의 매직 넘버(예: `w-[347px]`)를 쓰지 말고, 가급적 Tailwind 표준 수치나 프로젝트 설정을 활용하라."
    
    - "Figma의 그룹 구조를 그대로 복제하지 말고, 웹 표준에 맞는 시멘틱한 DOM 구조를 설계하라."
        
- **Comparison Guide:** * "비교 엔진의 `structural_diff` 결과 중 `position` 오차는 최우선적으로 해결해야 할 과제다."
    
- **Output Format:** * 사고 과정(Thought)을 먼저 서술한 뒤, 최종 파일 변경 내용(Action)을 출력할 것.
    

---

## 4. 도구 세트 (Agent Tools / MCP Functions)

에이전트가 환경과 상호작용하기 위해 사용하는 API들입니다.

- **`get_figma_context`**: 특정 프레임의 노드 데이터와 스타일 가이드 추출.
    
- **`read_project_config`**: 현재 프로젝트의 `tailwind.config.js` 및 `global.css` 내용 읽기.
    
- **`render_and_compare`**: 작성한 코드를 샌드박스에 띄우고 비교 엔진 점수를 리턴받음.
    
- **`inspect_node`**: 특정 Figma 노드와 대응되는 DOM 요소의 스타일 상세 비교 데이터 요청.
    

---

## 5. 자가 수정(Self-Correction) 시나리오 예시

1. **AI:** "버튼 생성을 완료했습니다." (일치율 82%)
    
2. **비교 엔진:** "오류: 디자인에서는 텍스트가 수직 중앙 정렬이지만, 현재 상단에 치우쳐 있음."
    
3. **AI (Thought):** "Figma 노드에서 `counterAxisAlignItems: CENTER` 속성을 확인했는데, 내 코드에는 `items-center` 클래스가 빠져 있군. 이를 추가해야겠다."
    
4. **AI (Action):** `flex` 클래스 옆에 `items-center`를 추가하여 코드 업데이트.
    
5. **결과:** 일치율 98% 달성. 종료.
    