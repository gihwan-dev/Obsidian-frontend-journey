오늘은 대기 이벤트(Wait Event)와 Shared Pool에 관한 내용을 읽었습니다:)

대기 이벤트란 프로세스가 작업을 진행할 수 있을 때 까지 수면(sleep) 상태에 빠지는 것을 의미합니다. 흥미로운 점은 대기 이벤트가 원래는 오라클 개발자들이 디버깅 용도로 개발한 것이라고 하네요! 7.0에서는 100여개, 10g 에서는 890여개, 11g 에서는 960개가 넘는 대기 이벤트가 정의돼 있다고 합니다.

오라클에서는 "대기 이벤트(Wait Event)" 라고 부르지만 SQL Server 에서는 "대기 유형(Wait Type)" 이라고 부른다고 합니다. 나중에 차세대에 SQL Server 기종 서비스를 개발하게 되면 참고가 될 거 같아서 머리에 메모 해뒀습니다ㅎㅎ

대기 이벤트가 지속적으로 많이 발생하면 병목 지점이 있음을 알리는 신호지만, 모든 대기 이벤트가 그렇지는 않다고 해요. 대기 이벤트는 아래와 같은 상황에 발생한다고 합니다.

1. 리소스가 다른 프로세스에 의해 사용 중일 때
2. 다른 프로세스의 선행 작업을 기다릴 때
3. 할 일이 없을 때

그리고 아래 같은 상황에 활동을 재개한다고 합니다. 참고로 수면 상태의 프로세스를 깨우는 것을 `interrupted` 라고 한다고 합니다:

1. 기다리던 리소스가 사용 가능해 질 때
2. 선행작업이 완료 될 때
3. 해야 할 일이 생겼을 때

많은 DBA가 래치(Latch)와 대기 이벤트(Wait Event)를 잘 구분하지 못하며 대기 이벤트(Wait Event)를 이해하기 위해 래치(Latch)에 대한 이해가 필요하다~~ 뭐 그런 내용이 있었습니다.

Shared Pool에 관한 내용에서는 **라이브러리 캐시** 관련 내용이 조금 눈에 들어왔던거 같아요! 라이브러리 캐시는 SQL과 실행 계획을 저장해 두는 캐시영역 이라고 합니다. SQL 명령어를 실행하기 위해서는 `구문 분석 -> 최적화(실행계획 생성) -> 포매팅` 하는 과정이 필요하며 이를 하드 파싱 이라고 한다고 합니다.

특히 이 하드 파싱을 무겁게 만드는 가장 결정적인 요인이 "최적화" 라고 하네요:) 그렇기에 같은 SQL을 여러번 최적화(실행계획 생성) 하는 일을 피하기 위해 캐시 공간을 두었고, 이를 라이브러리 캐시라고 한다고 하네요!

처음에는 그냥 ??? 인 상태로 책을 계속 읽었는데, 요즘은 뭔가 작업하면서 듣거나 봤던 단어들을 보면서 아~~ 이런거구나 하는 부분들이 생기는거 같아요. 굳이 읽어야 할까... 했지만 읽기 잘했다는 생각이 듭니다!!

날씨가 아주 춥네요! 최저 기온이 6도까지 내려간다고 합니다. 다들 건강 잘 챙기시고 수요일도 파이팅입니다!!
