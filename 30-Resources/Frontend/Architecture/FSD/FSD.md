FSD란 프론트엔드 앱을 구성하기 위한 아키텍쳐다. 간단하게 앱을 잘 구성하기 위한 규칙들이다. 이 방식의 주요한 목표는 프로젝트를 더 이해하기 쉽게 만들고 비즈니스 요구사항을 안정적으로 반영하기 위함이다.

## 간단한 예제

여기 FSD의 아주 간단한 예제가 있다:
- `📁 app`
- `📁 pages`
- `📁 shared`

이 최 상위 폴더들을 `layer`라고 부른다. 조금 더 깊게 들어가보자:
- `📂 app`
    - `📁 routes`
    - `📁 analytics`
- `📂 pages`
    - `📁 home`
    - `📂 article-reader`
        - `📁 ui`
        - `📁 api`
    - `📁 settings`
- `📂 shared`
    - `📁 ui`
    - `📁 api`

`📂 pages` 폴더 내부에 있는 `📂 home`, `📂 artivle-reader`를 *slice*라고 부른다. *slice*는 도메인을 기준으로 분리되는 계층이다.

`📂 app`, `📂 shared` 그리고 `📂 pages/article-reader`와 같은 것들을 *segments*라고 부른다. 그리고 이 *segments*의 내부는 *slice*로 구성된다(`📂 ui`, `📂 api`). 그리고 *slice*는 코드가 하는 일에 따라 나뉠 수 있다.

## 개념
Layer, Slice, Segment는 다음과 같은 계층 구조를 형성한다:
![[Pasted image 20250121131110.png]]

## Layer
Layer는 모든 FSD 프로젝트에서 일관적인 구조를 가진다. 모든 레이어들을 사용할 필요는 없지만, 이 이름에 대해 아는것은 중요하다. 총 6가지의 레이어가 있다(위에서 아래로 내려가는 계층적 구조):
1. **App**: 앱을 실행하는데 필요한 모든것 - routing, entrypoints, global styles, providers
2. **Pages**: 라우트에 종속된 페이지 컴포넌트
3. **Widgets**: 여러 작은 기능 또는 UI를 조립해 만든 독립된 하나의 큰 컴포넌트 - "상품목록 + 필터 + 정렬" 기능이 포함된 상품 목록 컴포넌트
4. **[[Features]]**: 비즈니스 로직을 담당하는 재사용 가능한 기능들 - "장바구니 담기" 또는 "리뷰 작성하기" 같은 핵심 기능들. 다른 페이지에서도 재사용 될 수 있는 기능
5. **[[Entities]]**: 프로그램에서 다루는 핵심 데이터 구조 - "유저" 또는 "상품" 같은 것
6. **Shared**: 비즈니스/프로젝트의 명세와 상관없이 재사용 할 수 있는 기능들

> [! Danger] App과 Shared는 Slice를 가지지 않는다. Segment만을 가진다.

여기서 중요한점은 각 layer는 아래 계층에 있는 layer만을 import 할 수 있다는 점이다.

## Slices
다음은 Slice다. 각 Slice는 비즈니스 도메인으로 구분된다. 이름의 선택은 자유롭게 하면되고, 원하는 만큼 많이 만들어 내도 된다. Slice는 연관된 모듈들을 가깝게 구성함으로써 빠르게 원하는 코드를 찾을 수 있게 해준다.

## Segments
Segment는 코드의 목적에 따라 구분된다. Segment의 이름 역시 정해져 있진 않지만, 관습적으로 사용되는 이름들이 있다:
- `ui` - UI와 관련된 모든것: UI 컴포넌트, 날짜 포맷 함수, 스타일 등등
- `api` - 백엔드 인터랙션: 요청 함수, 데이터 타입, mapper 등
- `model` - 데이터 모델: 스키마, 인터페이스, 스토어, 비즈니스 로직 등
- `lib` - 이 slice가 필요로 하는 라이브러리 코드
- `config` - 피쳐 플래그와 설정 파일들

보통은 이정도만 사용해도 대부분의 경우는 만족한다.

## 참고
FSD를 적용할 때 가장 햇갈리는 부분은 이 코드는 Features인지, Entities인지에 대한 부분이다. 이는 명확한 기준이 없고 팀 컨벤션에 달려있다. 그러므로 [[Entities 와 Features의 규칙 정하기]]에서 다루듯이 적절한 규칙을 정하는게 중요하다.
