## 트리 순서

렌더링 트리를 깊이 우선으로 순회하되, [[양방향 콘텐츠]]의 경우 시각적이 아닌 논리적 순서로 처리한다. 박스를 이동시키는 속성들도 고려된다.

## 요소

"요소"는 실제 요소, 가상 요소, 익명 박스를 모두 포함한다. 가상 요소와 익명 박스는 적절한 위치에서 자식으로 처리된다. 예를 들어, [[외부 목록 마커]]는 인접한 ":before" 박스보다 앞에 오고, 이는 다시 박스의 내용보다 앞에 온다.

## 페인팅 순서

스택의 바닥이 유저로부터 가장 멀고, 스택의 위가 유저로부터 가깝다.
```text
	        |	    |	    |	   |
	        |		|       |	   |	⇦ ☻
	        |		|	    |	   |    user
z-index:  canvas   -1	    0      1	  2
```

스태킹 컨텍스트 배경과 가장 낮은 `z-index`를 가진 위치 지정된 스태킹 컨텍스트가 스택의 맨 아래에 있고, 가장 높은 `z-index`를 가진 것들이 맨 위에 있다.

캔버스는 다른 요소 내에 포함될 경우 투명하고, 그렇지 않은 경우 브라우저가 정의한 색상을 가진다. 무한한 크기를 가지며 루트 요소를 포함한다. 초기에 뷰포트의 좌상단 모서리가 캔버스의 원점에 고정된다.

스태킹 컨텍스트를 생성하는 요소의 자손들은 다음 순서로 그려진다:

1. 루트 요소의 경우:
	- 전체 캔버스에 대한 배경색
	- 전체 캔버스에 대한 배경 이미지
2. 블록 요소의 경우:
	- 배경색
	- 배경 이미지
	- 테두리
3. 테이블의 경우:
	- 테이블 배경
	- 열 그룹 배경
	- 열 배경
	- 행 그룹 배경
	- 행 배경
	- 셀 배경
	- 모든 테이블 테두리
4. z-index가 음수인 위치 지정 자식 요소들
5. 일반 흐름의 블록 레벨 자식 요소들
6. 부동 요소들
7. 인라인 요소들
8. z-index: auto 또는 0인 위치 지정 자식 요소들
9. z-index가 양수인 위치 지정 자식 요소들
10. 마지막으로 외곽선 그리기
