---
type: blog-post
source: velog
author: "koreanthuglife"
title: "응답 헤더 쿠키 설정"
slug: "응답-헤더-쿠키-설정"
velogId: "7f662f2a-6141-459d-a17c-f89d135ab4e2"
velogUrl: "https://velog.io/@koreanthuglife/응답-헤더-쿠키-설정"
published: "2024-01-06T13:57:10.056Z"
updated: "2026-02-07T20:35:49.875Z"
tags:
  - "웹개발"
description: "Http 쿠키란 서버에서 유저의 브라우저로 보내주는 작은 데이터 조각이다. 쿠키는 유저의 요청이 같은 사이트에 오는 요청인지, 유저가 로그인 되어 있는지 등을 확인하기 위해 사용된다.쿠키는 주로 다음과 같은 세 가지 목적을 위해 사용된다:세션 관리로그인, 쇼핑 카트, "
importedAt: "2026-02-18T07:28:49.893Z"
---

## `Http` 쿠키

`Http` 쿠키란 서버에서 유저의 브라우저로 보내주는 작은 데이터 조각이다. 쿠키는 유저의 요청이 같은 사이트에 오는 요청인지, 유저가 로그인 되어 있는지 등을 확인하기 위해 사용된다.

쿠키는 주로 다음과 같은 세 가지 목적을 위해 사용된다:

1. 세션 관리
    1. 로그인, 쇼핑 카트, 게임 점수 또는 서버가 기억해야 하는 모든 것
2. 개인화
    1. 유저의 설정, 테마 와 같은 설정을 관리하기 위해
3. 트래킹
    1. 유저의 행동을 추적하기 위해

쿠키는 한 때 클라이언트측 데이터 저장소로 이용되기도 했다. 다만 현재는 데이터 저장을 위한 다양한 `API(localStorage, sesstionStorage)`가 존재하기에 그러한 목적으로는 잘 사용하지 않는다.

## 쿠키 생성

서버에서는 응답할 때 헤더에 쿠키를 설정해서 응답할 수 있다. `클리이언트`에서도 쿠키를 설정할 수 있지만 나는 개인적으로 쿠키에 보관데는 `jwt`는 항상 서버에서 관리하도록 한다. 그러한 이유에 대해서는 설명후 알려주도록 하겠다.

## 쿠키 속성

주로 사용해왔던 속성들만 설명하겠다.

- `domain` : 어디에서 쿠키를 보냈는지 확인하기 위해 사용된다: 즉 어떤 URL로 쿠키가 보내져야 하는지 확인하기 위해 사용된다. 서버에서 이 도메인을 특정하지 않으면 같은 도메인에서만 사용할 수 있다. 서브 도메인에서는 사용할 수 없다. → 즉 `[example.com](http://example.com)`(서버) 은 `[www.example.com](http://www.example.com)`(클라이언트) 으로부터 쿠키를 받을 수 없다. 이를 해결하기 위해서는 도메인에 `www.example.com` 으로 특정해주거나 `.example.com` 으로 서브 도메인에서도 받을 수 있도록 설정해주면 된다.
- `path` : 어떤 URL 경로에 쿠키를 보낼지를 결정하도록 해준다. `/` 를 사용하면 모든 경로에 보낸다.
- `SameSite` : cross-site 에서 쿠키를 보낼 수 있는지를 관리하게 해준다. `none` , `strict` , `lax` 총 3가지 값을 가진다.
    - `strict` : 쿠키의 원본 사이트로부터 온 요청에게만 쿠키를 보낼 수 있다.
    - `lax`: `strict` 와 비슷하다. 하지만 일부의 경우에 크로스-사이트 요청에 쿠키를 보내준다. 설정하지 않을경우 기본값이다.
        1. `GET` 요청과 같은 안전한 요청에
        2. 사용자가 다른사이트에서 현 사이트로 직접 이동하는 경우
    - `none` : 크로스-사이트 에서 쿠키를 모두 허용한다. 다만 이 값을 사용하기 위해서는 `secure` 옵션을 `true` 로 설정해야 한다.
- `HttpOnly` : 자바스크립트에서(클라이언트의) 쿠키에 접근할 수 없도록 한다.
- `secure` : `Https` 에서만 보낸다.

## JWT 토큰을 서버에서만 관리하도록 하는 이유
jwt 는 권한 인증을 위해 사용되는 민감한 정보이다. 따라서 클라이언트에서 접근할 수 있게 되면 보안상 좋지 않겠다고 생각했다. 그러한 이유로 배포시에는 상항 `httpOnly` 설정을 `true` 하여 배포한다.

## 개발 및 배포시 주의할 점

위를 참고해보면 알겠지만 배포시와 개발시에 쿠키 설정이 달라져야 한다. 그렇지 않으면 쿠키가 설정되지 않는다. `https` 인지 `http` 인지에 따라, 도메인이 같은 도메인인지에 따라서도 설정이 변경되어야 하므로 옵션을 잘 보고 알맞게 설정하자.
