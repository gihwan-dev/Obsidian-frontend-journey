### 1. DOM 노드 개수 (가장 중요 ⭐)

현재 23,000개라는 수치가 성능 저하의 근본 원인입니다. 최적화(가상화 정상 동작) 후 가장 드라마틱하게 줄어들어야 하는 수치입니다.

- **측정 방법:**
    
    1. 테스트 환경에서 데이터가 꽉 찬 상태(Full Data)로 로딩합니다.
        
    2. 개발자 도구 Console 탭에 다음 코드를 입력합니다.
        
        JavaScript
        
        ```
        document.querySelectorAll('*').length
        ```
        
- **목표:** 데이터가 1,000건이든 10,000건이든, **DOM 개수는 3,000개 미만(가급적 1,500개 내외)**으로 일정하게 유지되어야 합니다.
    

> 돔 갯수가 문제라기 보단, 돔 노드 갯수가 2만개 가까이 되는 상황에서 layout, style 계산이 계속해서 수행되는게 문제로 보임
### 2. "업데이트 비용" (Scripting + Rendering 시간)

데이터가 들어왔을 때(Polling), 브라우저가 화면을 갱신하는 데 걸리는 **총 시간**입니다. 이게 짧아야 CPU 팬이 안 돕니다.

- **측정 방법:**
    
    1. **Performance 탭** > 녹화 버튼(Record) 클릭.
        
    2. 데이터가 한 번 갱신되는 순간(약 3~5초)을 녹화하고 정지.
        
    3. **Main** 스레드 차트에서 데이터 갱신으로 인해 발생한 작업 덩어리(Task)를 클릭.
        
    4. 하단 **Summary** 탭의 `Total Time`을 확인.
        
- **체크 포인트:**
    
    - **Scripting:** React가 연산하는 시간 (줄어야 함)
        
    - **Rendering/Painting:** 브라우저가 그리는 시간 (DOM이 줄면 자동으로 확 줄어듬)
        

### 3. 리사이징/스크롤 시 FPS (Frames Per Second)

사용자가 느끼는 "버벅임"을 수치화하는 것입니다.

- **측정 방법:**
    
    1. 개발자 도구 메뉴(점 3개) > **More tools** > **Rendering**.
        
    2. **Frame Rendering Stats** 체크박스 활성화.
        
    3. 화면 좌측 상단에 그래프가 뜹니다.
        
    4. 테이블을 **스크롤**하거나 **리사이징**하면서 그래프를 봅니다.
        
- **기록할 것:**
    
    - 최저 FPS (예: 15fps까지 떨어짐)
        
    - GPU Memory 사용량 (MB)
        

### 4. React 렌더링 횟수 (Wasted Renders)

불필요하게 렌더링되는 컴포넌트가 있는지 확인합니다.

- **측정 방법:**
    
    1. **React Developer Tools** > **Profiler** 탭.
        
    2. 녹화 시작 -> 데이터 갱신(Polling) 1회 발생 -> 녹화 중지.
        
    3. **Flamegraph**를 확인.
        
- **확인할 것:**
    
    - 데이터가 들어왔을 때, **Table Row(행) 전체가 깜빡이는지**, 아니면 **변경된 Cell(셀)만 깜빡이는지**.
        
    - `Render duration` (렌더링에 걸린 시간)
        

---

### 📝 측정 체크리스트 (복사해서 쓰세요)

|**측정 항목**|**현재 값 (Before)**|**목표 값 / 개선 후 (After)**|**비고**|
|---|---|---|---|
|**1. DOM 노드 수**|`예: 23,315개`|`1,500개 미만`|가상화 적용 여부 확인|
|**2. 1회 갱신 시간**|`예: 450ms`|`50ms 미만`|Performance 탭 Total Time|
|**3. 리사이징 FPS**|`예: 20fps`|`60fps (방어)`|뚝뚝 끊김 여부|
|**4. JS Heap Size**|`예: 270MB`|`100MB 이하`|메모리 누수 확인|

**팁:**

가장 먼저 **1번(DOM 노드 수)**만 확실하게 줄여도, 2, 3, 4번은 덩달아 좋아질 겁니다. 테스트 환경에서 `document.querySelectorAll('*').length`를 쳤을 때 숫자가 확 줄어드는 희열을 느껴보세요! 🔥


## Before

### Frame
30대 fps, 가끔 20대까지 떨어짐
gpu: 37 mb 사용
![[Pasted image 20260209152145.png]]

### Performance

**이벤트 리스너 731, CPU 최대 사용 58프로, 힙사이즈 138메가**
![[Pasted image 20260209145954.png]]

### 3초 측정 결과

![[Pasted image 20260209153237.png]]

### React 프로파일러
**매번 모두 리렌더링**
![[Pasted image 20260209145844.png]]

## After: 이벤트 위임 처리
### Frame
![[Pasted image 20260209165514.png]]
40대 fps, 가끔 30대까지 떨어짐(약간 상승)
gpu: 37 mb 사용(비슷함)

### Performance
**이벤트 리스너 731 => 343, CPU 최대 사용 58 => 55프로, 힙사이즈 138 => 104메가**
![[Pasted image 20260209165616.png]]

### 3초 측정 결과
![[Pasted image 20260209165749.png]]

### React 프로파일러
**여전히 매번 모두 리렌더링**
![[Pasted image 20260209165915.png]]

## After: 이벤트 위임 처리 + Memo

### Frame
![[Pasted image 20260209172856.png]]
40대 fps, 가끔 30대까지 떨어짐(약간 상승)
gpu: 37 mb 사용(비슷함)

### Performance
**이벤트 리스너 731 => 343 => 470, CPU 최대 사용 58 => 28프로, 힙사이즈 138 => 104 => 98 메가**
![[Pasted image 20260210142322.png]]

### 3초 측정 결과
![[Pasted image 20260210142433.png]]

### React 프로파일러

스크롤링 같은 data가 변하지 않은 경우 메모이 제이션이 잘 적용됨. 하지만 여전히 data가 폴링에서 다시 전달되는 경우 모든 셀이 리렌더링 되고 있음.

**데이터 변경시 모든 셀 리렌더링** => **데이터 변경 되더라도 리렌더링 필요한 셀만 리렌더링**


**스크롤 수행시에는 적절히 보존**