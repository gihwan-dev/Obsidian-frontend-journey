# 🚫 10.10.35.62 linux 에 설치했던 harbor

## 설치 과정

### 1. docker compose 설치
```bash
yum install docker-compose-plugin
```

### 2. harbor 다운로드
[Harbor Download](https://goharbor.io/docs/2.10.0/install-config/download-installer/)

### 3. 인스톨러 압축 해제후, harbor.yml.tmpl 파일 수정
- host 를 변경하고, https 설정을 주석처리

### 4. 인스톨 스크립트 실행
```bash
./install.sh
```

[Harbor Run Installer Script](https://goharbor.io/docs/2.10.0/install-config/run-installer-script/#connect-http)

### 5. http 로 실행하기 위한 설정
- host 의 /etc/docker/daemon.json 과 dind 의 json 에 모두 insecure 설정을 해줘야함. 그렇지 않으면 레지스트리에서 push, pull 할때 https 로 요청을 해서 오류가 남

### 6. harbor 에 필요한 이미지를 push
- harbor 는 nexus 랑 다르게 project 하위에 push 해야한다. (default 로 library 가 존재함)

### harbor 시작
/home/dpm-fe/harbor 폴더에 들어가서 docker-compose 를 이용해 컨테이너 스타트

```bash
docker-compose start
```

## 현재 상태
> 팀내 레지스트리로 사용하던 nexus 와 harbor 모두 exem.nexus.xyz 로 변경하여, 팀내 컨테이너는 종료

---
*ClickUp 원본: https://app.clickup.com/25540965/docs/rbeb5-443818/rbeb5-1698758*
