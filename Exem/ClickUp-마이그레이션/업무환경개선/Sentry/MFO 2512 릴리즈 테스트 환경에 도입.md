# MFO 2512 릴리즈 테스트 환경에 도입

## 배경
- session replay 기능을 활용하면 테스트 중에 발생한 에러를 sentry 에서 확인 가능하도록 로깅 할 수 있음
- 그러나 레거시 프로젝트는 uglify 정도의 빌드 과정만을 거치므로 개발 환경과 배포 환경의 차이를 감지하도록 프로그래밍 할 수가 없음

## 구현
- sentry 플러그인을 조건부로 활성화 하기위해 jenkins 파이프라인에서 index.html 파일과 common/Util.js 파일에 필요한 코드를 삽입 하는 형태로 구현함

### index.html 에 센트리 플러그인 삽입

```bash
INDEX="/home/fe1/MAXGAUGE/MFO/2512_orcl/PlatformJS_2512/svc/www/MFO/index.html"

# 중복 삽입 방지
if grep -q "sentry.exem-fe1.com/js-sdk-loader/246c6dff3b6fc5d264ab4e7914694259.min.js" "$INDEX"; then
  echo "Sentry already exists - skip"
  exit 0
fi

# 822번째 "줄 직전에" 삽입 (822번째 줄 위로 들어감)
# ... (자세한 스크립트는 ClickUp 원본 참조)
```

### error 발생시 Error 객체 생성 및 센트리 api 트리거

- Util.js의 showMessage 함수에 Sentry 에러 추적 코드 삽입
- Ext.MessageBox.ERROR인 경우에만 에러 캡처
- Error 객체 생성 및 추가 컨텍스트와 함께 Sentry로 전송

## Sentry 확인
- https://sentry.exem-fe1.com/organizations/sentry/issues/19/

---
*ClickUp 원본: https://app.clickup.com/25540965/docs/rbeb5-443818/rbeb5-3440518*
