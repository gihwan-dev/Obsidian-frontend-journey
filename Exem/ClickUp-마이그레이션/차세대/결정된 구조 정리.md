# 결정된 구조 정리 (Decided Architecture Summary)

## 메타데이터
- **상태**: 🟡 Open
- **담당자**: 최기환
- **작성자**: 최기환
- **생성일**: 2025-09-03
- **Product**: Maxgauge VI
- **ClickUp**: [링크](https://app.clickup.com/t/86euqdbgj)

---

## 요약

MaxGauge-VI의 새로운 아키텍처 결정 사항 정리. apps/ 폴더를 폐지하고 src/services/ 기반의 플러그인 아키텍처로 전환.

---

## 1. 배경: 왜 구조를 변경하는가?

기존 apps와 src로 분리된 구조는 각 데이터베이스(Oracle, PostgreSQL 등)가 별개의 제품처럼 보이는 오해를 유발했습니다. 그러나 **MaxGauge-VI는 하나의 통합된 제품**이며, 각 데이터베이스는 그 안에서 교체 가능한 '서비스'입니다.

이러한 제품 철학을 코드 구조에 명확히 반영하고, 개발자의 인지 부하를 줄이며, 프로젝트의 확장성을 극대화하기 위해 아키텍처를 재정의합니다.

---

## 2. 새로운 아키텍처: src/services

### 폴더 구조

```
/                        # 프로젝트 루트
├── apps/                # ❌ 폐지: 모든 코드는 src/services로 통합
├── packages/            # ❌ 폐지: 공통 모듈은 src/shared로 귀속
└── src/
    ├── services/        # ✅ 개별 데이터베이스/도메인을 플러그인처럼 관리
    │   ├── oracle/      # ✅ Oracle "서비스"
    │   │   ├── pages/
    │   │   ├── widgets/
    │   │   ├── features/
    │   │   └── entities/
    │   ├── altibase/    # ✅ Altibase "서비스" (미래 확장)
    │   └── backoffice/  # ✅ Backoffice "서비스"
    │
    ├── pages/           # 모든 서비스(mfo, mfa, mft) 공통 페이지
    ├── widgets/         # 모든 서비스(mfo, mfa, mft) 공통 위젯
    ├── features/        # 모든 서비스(mfo, mfa, mft) 공통 기능
    ├── entities/        # 모든 서비스(mfo, mfa, mft) 공통 엔티티
    └── shared/          # 모든 서비스(mfo, mfa, mft) 최하위 공통 모듈
        ├── ui/          # 디자인 시스템 컴포넌트
        ├── tokens/      # 디자인 토큰 (CSS 변수, theme)
        ├── api/         # API 클라이언트, fetcher
        ├── hooks/       # 재사용 가능한 React hooks
        ├── lib/         # 유틸 함수, 헬퍼
        └── config/      # 환경설정, 상수, 타입
```

---

## 3. 핵심 원칙: 단방향 의존성과 플러그인 아키텍처

새로운 아키텍처의 가장 중요한 규칙은 **의존성의 방향을 한쪽으로만 흐르게 하는 것**입니다.

### ✅ 허용: services → src
각 service(oracle, backoffice 등)는 src의 공통 widgets, features, shared 모듈을 자유롭게 가져와 사용할 수 있습니다.

### ❌ 금지: src → services
공통 모듈(widgets, shared 등)은 특정 service에 절대 의존해서는 안 됩니다.

이 원칙을 통해 각 데이터베이스 service를 **플러그인(Plugin)** 처럼 취급할 수 있습니다.

---

## 4. 목표: Router와 GNB만 교체해 DB별 제품 전환

각 service는 자신의 기능과 라우팅 정보를 담은 Router 객체를 외부에 유일하게 노출(export)하는 것을 목표로 합니다.

```typescript
// src/services/oracle/routes.tsx
export const oracleRoutes = [...]

// src/Router.tsx
import { oracleRoutes } from './services/oracle/routes';
// import { postgresqlRoutes } from './services/postgresql/routes'; // 주석만 바꾸면 DB 전환

const allRoutes = [...commonRoutes, ...oracleRoutes];
```

이렇게 되면, `src/Router.tsx`에서 import 구문 한 줄만 변경하는 것으로 전체 애플리케이션의 데이터베이스 컨텍스트를 손쉽게 교체할 수 있습니다.

---

## 5. 기대 효과

1. **명확성 향상**: 통합 제품의 '서비스'라는 개념이 코드 구조에 명확히 드러나, 모든 개발자가 동일한 그림을 이해하게 됩니다.

2. **플러그인 기반 확장**: 신규 데이터베이스(db2, altibase 등) 추가 시, src/services에 새 폴더를 만들고 라우터를 구현하는 것만으로 확장이 완료됩니다.

3. **엄격한 관심사 분리**: 단방향 의존성 규칙은 공통 로직과 서비스별 로직의 결합을 원천적으로 방지하여 코드의 유지보수성을 극대화합니다.

4. **안정적인 리팩토링**: 서비스 간의 경계가 명확하므로, 하나의 서비스 수정이 다른 서비스에 미치는 영향을 최소화할 수 있습니다.

---

## 서브태스크
- [[서비스 어댑터]] - 서비스 어댑터 패턴 제안

---

## 관련 태스크
- [[Lint 정리 역할분담]] - 사전 작업
