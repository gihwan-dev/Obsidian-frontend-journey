*Layers*는 FSD 조직적 계층(organisational hierarchy)의 첫 번째 수준이다. 계층의 목적은 코드가 필요로 하는 책임의 정도와 앱의 모듈들에 대한 의존성의 정도에 따라 코드를 분리하는 것이다. 각 계층은 코드에 얼마나 많은 책임을 할당해야 하는지 결정하는데 도움이되는 특별한 의미를 가지고 있다.

총 **7개의 계층**이 있으며, 가장 많은 책임과 의존성에서 가장 적은 것 순으로 배열되어 있다:
![[Pasted image 20250213091042.png]]

모든 layer를 사용할 필요는 없다. 프로젝트에 필요한 것들만 가져다 사용하면 된다. 주로 대부분의 프론트엔드 프로젝트는 Shared, Pages, App 계층을 가진다.

## layer 에서의 임포트 규칙

Layer는 *Slice*로 구성된다 -- 슬라이스는 높은 응집도를 가진 모듈 그룹이다. 슬라이스간의 의존성은 **계층에 대한 임포트 규칙**에 의해 통제된다.

> 각 slice는 자신보다 아래 계층에 존재하는 slice의 모듈만 임포트 할 수 있다.

예를 들어, `📁 ~/features/aaa` 폴더는 "aaa"라는 이름의 슬라이스다. 그 안의 파일인 `~/features/aaa/api/request.ts`는 `📁 ~/features/bbb`의 어떤 파일도 임포트할 수 없지만, `📁 ~/entities`와 `📁 ~/shared`의 코드는 임포트할 수 있으며, `~/features/aaa/lib/cache.ts`와 같이 `📁 ~/features/aaa` 내의 형제 코드도 임포트할 수 있다.

App과 Shared 계층은 이 규칙의 **예외**다 -- 이들은 동시에 계층이면서 슬라이스다. 슬라이스는 비즈니스 도메인별로 코드를 분할하는데, Shared는 비즈니스 도메인을 가지지 않고, App은 모든 비즈니스 도메인을 결합하기 때문이다.

실제로, App과 Shared 계층은 세그먼트로 구성되어 있으며, 세그먼트들은 서로 자유롭게 임포트할 수 있다는 것을 의미한다.

## 계층 정의

이 섹션에서는 각 계층에 어떤 종류의 코드가 속하는지에 대한 직관을 만들기 위해 각 계층의 의미를 설명한다.

### Shared
이 계층은 앱의 나머지 부분을 위한 기초를 형성한다. 백엔드, 서드파티 라이브러리, 환경 등 외부 세계와의 연결을 생성하는 공간이다. 또한 자체적으로 고도로 독립된 라이브러리를 정의하는 공간이기도 하다.

이 계층은 App 계층과 마찬가지로 슬라이스를 포함하지 않는다. 슬라이스는 계층을 비즈니스 도메인으로 나누기 위한 것이지만, Shared에는 비즈니스 도메인이 존재하지 않는다. 이는 Shared의 모든 파일들이 서로를 참조하고 임포트 할 수 있다는 것을 의미한다.

이 계층에서 일반적으로 찾을 수 있는 세그먼트들은 다음과 같다:
- `📁 api` — API 클라이언트와 특정 백엔드 엔드포인트에 요청을 보내는 함수들이다.
- `📁 ui` — 애플리케이션의 UI 키트다. 이 계층의 컴포넌트들은 비즈니스 로직을 포함해서는 안 되지만, 비즈니스 테마를 가지는 것은 괜찮다. 예를 들어 회사 로고와 페이지의 레이아웃을 여기에 둘 수 있다. UI 로직을 포함한 컴포넌트도 허용된다.
- `📁 lib` — 내부 라이브러리들의 모음이다. 이 폴더는 헬퍼나 유틸리티로 취급되어서는 안된다([[헬퍼 & 유틸이 쓰레기통이 되는 이유]]). 대신, 이 폴더의 모든 라이브러리는 날짜, 색상, 텍스트 조작 등과 같이 하나의 집중된 영역을 가져야 한다. 그리고 그 집중 영역은 README 파일에 문서화되어야 한다. 팀의 개발자들은 이러한 라이브러리들에 무엇을 추가할 수 있고 없는지 알아야 한다.
- `📁 config` — 환경 변수, 전역 기능 플래그 및 앱을 위한 기타 전역 설정이다.
- `📁 routes` — 라우트 상수나 라우트 매칭을 위한 패턴이다.
- `📁 i18n` — 번역을 위한 설정 코드, 전역 번역 문자열이다.

더 많은 세그먼트를 추가할 수 있지만, 이러한 세그먼트의 이름이 내용의 본질이 아닌 목적을 설명하도록 해야한다. 예를들어 `components`, `hooks`, `types`는 코드를 찾을 때 그다지 도움이 되지 않기 때문에 좋지 않은 세그먼트의 이름이다.

