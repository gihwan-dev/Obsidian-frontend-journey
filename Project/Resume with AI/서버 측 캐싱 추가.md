# 서버 측 캐싱 추가

#resume-with-ai #단기 #성능

## 요약
Notion/ClickUp 검색 결과와 반복 호출되는 함수에 캐싱을 적용한다.

## 왜?
- 현재 모든 채팅 메시지가 Notion/ClickUp API를 매번 호출
- `buildResumePrompt()`는 배포 시에만 변하는 데이터인데 매 요청마다 6개의 `getCollection()` 호출
- 이력서 데이터는 자주 변하지 않음

## 어떻게?
1. `buildResumePrompt()` 모듈 스코프 변수에 한 번만 빌드
2. `getVertex()` 싱글톤 캐싱
3. Notion/ClickUp 검색 결과 5분 TTL 캐싱: `Map<string, {data, timestamp}>`

## 예상 효과
- 중복 API 호출 90%+ 제거
- Notion/ClickUp API 비용 30-50% 감소
- 채팅 응답 속도 향상

## 연관 이슈
- [[검색 성능 개선]] - MiniSearch 도입으로 `obsidian.server.ts` 검색 로직이 변경됨. 캐싱 적용 시 새로운 검색 구조 반영 필요