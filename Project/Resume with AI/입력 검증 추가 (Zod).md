# 입력 검증 추가 (Zod)

#resume-with-ai #단기 #보안

## 요약
`/api/chat` 요청 본문에 Zod 스키마 검증을 추가한다.

## 왜?
- 현재 `request.json() as { messages: UIMessage[] }`로 타입 단언만 존재
- 거대한 페이로드나 기형 요청이 서버리스 함수 타임아웃이나 과도한 토큰 사용을 유발 가능

## 어떻게?
- 메시지 배열 최대 50개, 개별 메시지 최대 4000자, 총 요청 크기 100KB 제한
- Zod 스키마 정의 후 `parse()` 호출
- 실패 시 400 응답

## 예상 효과
- 비정상 요청으로 인한 비용과 서버 부담 방지